# .trigger-codedeploy:
# # .gitlab-ci.yml
#   stage: trigger-codedeploy
#   image: python:3.11-alpine
#   script:
#     - |
#       apk add --no-cache zip
#       pip install awscli
#       echo "1. Створення артефакту (ZIP-файл)..."
#       # Архівація всіх необхідних файлів та директорій
#       zip -r deploy_artifact.zip . -x node_modules/\* -x .git\* -x .gitlab-ci.yml 
    
#       echo "2. Завантаження артефакту в S3: $S3_ARTIFACT_KEY"
#       # Завантаження свіжоствореного ZIP-файлу в S3
#       aws s3 cp deploy_artifact.zip s3://$S3_SYNC_BUCKET/$S3_ARTIFACT_KEY
    
#       echo "3. Запуск розгортання CodeDeploy з S3..."
#       # Запуск розгортання CodeDeploy, вказуючи на щойно завантажений файл
#       aws deploy create-deployment \
#       --application-name $CODEDEPLOY_APPLICATION_NAME \
#       --deployment-group-name $CODEDEPLOY_DEPLOYMENT_GROUP_NAME \
#       --s3-location bucket=$S3_SYNC_BUCKET,key=$S3_ARTIFACT_KEY,bundleType="zip" \
#       --region $AWS_REGION

#   tags:
#     - alpine
